<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kazoo Proto - Voice to Instrument</title>

    <!-- Tailwind CSS CDN (Play CDN for rapid prototyping) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#1e3a8a',
              secondary: '#6b7280',
              accent: '#3b82f6',
              'apple-base': '#f5f5f7',
              'apple-dark': '#1d1d1f',
              'apple-blue': '#0071e3',
              'apple-blue-hover': '#0077ed',
              'apple-text-gray': '#86868b'
            },
            fontFamily: {
              sans: [
                '"Inter"',
                '"SF Pro Display"',
                '"SF Pro Text"',
                '-apple-system',
                'BlinkMacSystemFont',
                'system-ui',
                'sans-serif'
              ]
            },
            letterSpacing: {
              tighter: '-0.05em',
              tight: '-0.025em',
              wide: '0.025em'
            },
            transitionTimingFunction: {
              'apple-ease': 'cubic-bezier(0.4, 0, 0.2, 1)'
            },
            animation: {
              'pulse-slow': 'pulse-slow 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite'
            }
          }
        }
      }
    </script>

    <!-- Custom styles (overrides and animations) -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-[#f5f5f7] text-[#1d1d1f] font-sans antialiased">
    <div class="pointer-events-none fixed inset-0 z-0 opacity-80">
        <div class="absolute -top-32 right-[-10%] h-96 w-96 rounded-[32px] bg-[#dfe8ff] blur-[140px]"></div>
        <div class="absolute bottom-[-10%] left-[-10%] h-80 w-80 rounded-[32px] bg-[#ffe2f3] blur-[120px]"></div>
    </div>

    <!-- ÂØºËà™Ê†è -->
    <nav class="apple-glass-light fixed top-0 left-0 right-0 z-50 border-b border-black/5">
        <div class="mx-auto flex h-16 max-w-5xl items-center justify-between px-6">
            <a href="#" class="flex items-center gap-3" aria-label="Kazoo Proto home">
                <div class="flex h-10 w-10 items-center justify-center rounded-2xl bg-[#1d1d1f] text-white text-lg">üéß</div>
                <div>
                    <p class="text-base font-semibold tracking-tight text-[#1d1d1f]">Kazoo Proto</p>
                    <p class="text-xs uppercase tracking-[0.35em] text-[#86868b]">Realtime Voice</p>
                </div>
            </a>
            <div class="hidden items-center gap-6 text-sm md:flex">
                <a href="#instrumentSection" class="nav-link" data-scroll-target="instrumentSection">Instruments</a>
                <a href="#recordingSection" class="nav-link" data-scroll-target="recordingSection">Control</a>
                <a href="#visualizer" class="nav-link" data-scroll-target="visualizer">Visualizer</a>
                <a href="#tipsSection" class="nav-link" data-scroll-target="tipsSection">Tips</a>
            </div>
            <div class="flex items-center gap-3">
                <div class="flex items-center gap-3 rounded-full bg-white/80 px-4 py-1.5 text-sm font-medium text-[#1d1d1f] shadow-sm">
                    <span class="text-[#86868b]">Mode</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="modeToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="font-semibold" id="modeText">Continuous</span>
                    <span class="rounded-full bg-[#0071e3] px-2 py-0.5 text-[11px] font-semibold tracking-wide text-white">BETA</span>
                </div>
                <button class="rounded-full border border-white/40 bg-white/70 px-4 py-1.5 text-sm font-semibold text-[#0071e3] transition hover:bg-white" id="helpBtn">Session Tips</button>
            </div>
        </div>
    </nav>

    <main class="relative z-10 pt-24 pb-16">
        <div class="mx-auto max-w-6xl px-6">
            <!-- Hero -->
            <section class="relative overflow-hidden rounded-[32px] bg-gradient-to-br from-[#edf2ff] via-white to-[#f8ecff] px-6 py-16 text-center shadow-[0_40px_80px_rgba(15,23,42,0.12)] fade-up">
                <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.8),_transparent_55%)]"></div>
                <div class="relative z-10 mx-auto max-w-3xl">
                    <p class="text-sm uppercase tracking-[0.45em] text-[#86868b]">Content-first ‚Ä¢ Fluid audio</p>
                    <h1 class="mt-4 text-[clamp(2.5rem,5vw,4.5rem)] font-semibold leading-tight tracking-tight text-[#1d1d1f]">Let your voice become the instrument</h1>
                    <p class="mt-4 text-xl leading-relaxed text-[#424245]">Kazoo Proto maps your microphone to Tone.js engines with AudioWorklet-grade latency so slides, vibrato, and breathiness feel natural.</p>
                    <div class="mt-8 flex flex-wrap justify-center gap-3 text-sm font-medium text-[#424245]">
                        <span class="rounded-full bg-white/70 px-4 py-1.5">Latency target &lt; 50ms</span>
                        <span class="rounded-full bg-white/70 px-4 py-1.5">AudioWorklet ‚Ä¢ YIN detection</span>
                        <span class="rounded-full bg-white/70 px-4 py-1.5">Continuous + Legacy engines</span>
                    </div>
                    <div class="mt-10 grid gap-4 md:grid-cols-2">
                        <div class="rounded-[24px] border border-white/60 bg-white/70 px-6 py-4 text-left shadow-sm backdrop-blur fade-up">
                            <p class="text-sm font-semibold uppercase tracking-wide text-[#86868b]">Step 1</p>
                            <p class="mt-1 text-2xl font-semibold tracking-tight text-[#1d1d1f]">Choose your timbre</p>
                            <p class="mt-2 text-sm text-[#424245]">Pick from finely tuned sax, violin, piano, flute, guitar, or synth engines.</p>
                        </div>
                        <div class="rounded-[24px] border border-white/60 bg-white/70 px-6 py-4 text-left shadow-sm backdrop-blur fade-up" style="animation-delay:0.1s;">
                            <p class="text-sm font-semibold uppercase tracking-wide text-[#86868b]">Step 2</p>
                            <p class="mt-1 text-2xl font-semibold tracking-tight text-[#1d1d1f]">Start singing</p>
                            <p class="mt-2 text-sm text-[#424245]">Allow the mic, tap start, and glide between notes with immediate feedback.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ÊéßÂà∂Âå∫ -->
            <section class="mt-12 grid gap-6 lg:grid-cols-12">
                <!-- ‰πêÂô®ÈÄâÊã© -->
                <div class="apple-bento fade-up scroll-section lg:col-span-7" id="instrumentSection">
                    <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
                        <div>
                            <p class="text-sm uppercase tracking-wide text-[#86868b]">Step 1</p>
                            <h2 class="text-3xl font-semibold leading-tight tracking-tight text-[#1d1d1f]">Choose your instrument</h2>
                        </div>
                        <div class="status-chip status-ready" id="instrumentStatus">Saxophone</div>
                    </div>
                    <p class="mt-3 text-base text-[#424245]">Presets keep dynamics intact. Switch freely when the engine is idle.</p>
                    <div class="mt-6 grid gap-4 sm:grid-cols-2 xl:grid-cols-3">
                        <button class="instrument-btn active flex flex-col items-start gap-3 rounded-2xl border border-white/60 bg-white/80 px-5 py-6 text-left shadow-[0_20px_60px_rgba(15,23,42,0.08)] transition duration-300 hover:-translate-y-1 hover:shadow-[0_30px_80px_rgba(15,23,42,0.12)] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#0071e3] focus-visible:ring-offset-2" data-instrument="saxophone" aria-label="Select saxophone instrument">
                            <span class="text-4xl">üé∑</span>
                            <div>
                                <p class="instrument-name text-xl font-semibold tracking-tight">Saxophone</p>
                                <p class="text-sm text-[#424245]">Velvety breaths for solo leads.</p>
                            </div>
                        </button>
                        <button class="instrument-btn flex flex-col items-start gap-3 rounded-2xl border border-white/60 bg-white/70 px-5 py-6 text-left transition duration-300 hover:-translate-y-1 hover:shadow-[0_20px_60px_rgba(15,23,42,0.12)] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#0071e3] focus-visible:ring-offset-2" data-instrument="violin" aria-label="Select violin instrument">
                            <span class="text-4xl">üéª</span>
                            <div>
                                <p class="instrument-name text-xl font-semibold tracking-tight">Violin</p>
                                <p class="text-sm text-[#424245]">Expressive and cinematic.</p>
                            </div>
                        </button>
                        <button class="instrument-btn flex flex-col items-start gap-3 rounded-2xl border border-white/60 bg-white/70 px-5 py-6 text-left transition duration-300 hover:-translate-y-1 hover:shadow-[0_20px_60px_rgba(15,23,42,0.12)] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#0071e3] focus-visible:ring-offset-2" data-instrument="piano" aria-label="Select piano instrument">
                            <span class="text-4xl">üéπ</span>
                            <div>
                                <p class="instrument-name text-xl font-semibold tracking-tight">Piano</p>
                                <p class="text-sm text-[#424245]">Percussive and glassy.</p>
                            </div>
                        </button>
                        <button class="instrument-btn flex flex-col items-start gap-3 rounded-2xl border border-white/60 bg-white/70 px-5 py-6 text-left transition duration-300 hover:-translate-y-1 hover:shadow-[0_20px_60px_rgba(15,23,42,0.12)] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#0071e3] focus-visible:ring-offset-2" data-instrument="flute" aria-label="Select flute instrument">
                            <span class="text-4xl">üéº</span>
                            <div>
                                <p class="instrument-name text-xl font-semibold tracking-tight">Flute</p>
                                <p class="text-sm text-[#424245]">Breathy crystalline highs.</p>
                            </div>
                        </button>
                        <button class="instrument-btn flex flex-col items-start gap-3 rounded-2xl border border-white/60 bg-white/70 px-5 py-6 text-left transition duration-300 hover:-translate-y-1 hover:shadow-[0_20px_60px_rgba(15,23,42,0.12)] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#0071e3] focus-visible:ring-offset-2" data-instrument="guitar" aria-label="Select guitar instrument">
                            <span class="text-4xl">üé∏</span>
                            <div>
                                <p class="instrument-name text-xl font-semibold tracking-tight">Guitar</p>
                                <p class="text-sm text-[#424245]">Plucked harmonic richness.</p>
                            </div>
                        </button>
                        <button class="instrument-btn flex flex-col items-start gap-3 rounded-2xl border border-white/60 bg-white/70 px-5 py-6 text-left transition duration-300 hover:-translate-y-1 hover:shadow-[0_20px_60px_rgba(15,23,42,0.12)] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#0071e3] focus-visible:ring-offset-2" data-instrument="synth" aria-label="Select synth instrument">
                            <span class="text-4xl">üéõÔ∏è</span>
                            <div>
                                <p class="instrument-name text-xl font-semibold tracking-tight">Synth</p>
                                <p class="text-sm text-[#424245]">Modern pads + leads.</p>
                            </div>
                        </button>
                        <button class="instrument-btn flex flex-col items-start gap-3 rounded-2xl border border-dashed border-white/60 bg-white/50 px-5 py-6 text-left opacity-40" disabled>
                            <span class="text-4xl">üé∫</span>
                            <div>
                                <p class="instrument-name text-xl font-semibold tracking-tight">Trumpet</p>
                                <p class="text-sm text-[#424245]">Under design.</p>
                            </div>
                        </button>
                        <button class="instrument-btn flex flex-col items-start gap-3 rounded-2xl border border-dashed border-white/60 bg-white/50 px-5 py-6 text-left opacity-40" disabled>
                            <span class="text-4xl">ü•Å</span>
                            <div>
                                <p class="instrument-name text-xl font-semibold tracking-tight">Drums</p>
                                <p class="text-sm text-[#424245]">Coming soon.</p>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- ‰∏ªÊéßÂà∂ÊåâÈíÆ -->
                <div class="apple-bento fade-up scroll-section lg:col-span-5" id="recordingSection">
                    <p class="text-sm uppercase tracking-wide text-[#86868b]">Step 2</p>
                    <h2 class="mt-1 text-3xl font-semibold leading-tight tracking-tight text-[#1d1d1f]">Control center</h2>
                    <p class="mt-3 text-base text-[#424245]">Tap start, allow microphone access, and perform. Kazoo Proto manages routing, smoothing, and latency monitoring.</p>

                    <div class="mt-6 flex flex-col items-center gap-3 text-center">
                        <button class="start-cta animate-pulse-slow" id="startBtn" aria-label="Start playing audio">
                            <span>Start Playing</span>
                        </button>
                        <button class="stop-cta hidden" id="stopBtn" aria-label="Stop playing audio">
                            <span>Stop</span>
                        </button>
                        <p class="helper-text" id="recordingHelper">No setup required ‚Ä¢ Works in your browser</p>
                    </div>

                    <div class="mt-6 flex items-center justify-between rounded-2xl border border-white/70 bg-white/70 px-5 py-3">
                        <div>
                            <p class="text-xs uppercase tracking-wide text-[#86868b]">Session state</p>
                            <p class="text-base font-semibold">Ready</p>
                        </div>
                        <div class="status-chip status-ready" id="recordingStatus">Ready</div>
                    </div>
                </div>
            </section>

            <!-- Áä∂ÊÄÅÊòæÁ§∫ -->
            <div class="hidden mt-10 grid gap-4 md:grid-cols-3 fade-up scroll-section" id="statusBar">
                <div class="status-card">
                    <p class="text-xs uppercase tracking-wide text-[#86868b]">Status</p>
                    <p class="text-2xl font-semibold tracking-tight" id="systemStatus">Ready</p>
                </div>
                <div class="status-card">
                    <p class="text-xs uppercase tracking-wide text-[#86868b]">Latency</p>
                    <p class="text-2xl font-semibold tracking-tight" id="latency">--</p>
                </div>
                <div class="status-card">
                    <p class="text-xs uppercase tracking-wide text-[#86868b]">Confidence</p>
                    <p class="text-2xl font-semibold tracking-tight" id="confidence">--</p>
                </div>
            </div>

            <!-- ÂèØËßÜÂåñ -->
            <div class="visualizer fade-up hidden mt-10 scroll-section" id="visualizer">
                <div class="rounded-[28px] bg-[#1d1d1f] px-6 py-8 text-white shadow-[0_30px_80px_rgba(0,0,0,0.45)]">
                    <div class="flex flex-col gap-6 lg:flex-row lg:items-center">
                        <div class="flex-1">
                            <p class="text-xs uppercase tracking-[0.3em] text-white/60">Current note</p>
                            <p class="mt-2 text-6xl font-semibold tracking-tight text-white" id="currentNote">--</p>
                            <p class="mt-1 text-sm text-white/60" id="currentFreq">--</p>
                        </div>
                        <div class="flex-[2] rounded-2xl border border-white/10 bg-white/5 p-4">
                            <canvas id="pitchCanvas" width="600" height="80" class="h-24 w-full rounded-xl bg-black/20"></canvas>
                        </div>
                    </div>
                    <div class="mt-4 text-xs uppercase tracking-[0.3em] text-white/50">
                        Reference lines mark C3 / C4 / C5 intervals.
                    </div>
                </div>
            </div>

            <!-- Â∏ÆÂä©ÈÉ®ÂàÜ -->
            <section class="apple-bento mt-12 fade-up scroll-section" id="tipsSection">
                <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
                    <div>
                        <p class="text-sm uppercase tracking-wide text-[#86868b]">Need tips?</p>
                        <h3 class="text-2xl font-semibold tracking-tight text-[#1d1d1f]">Run low-latency sessions with confidence</h3>
                    </div>
                    <button class="rounded-full border border-white/60 px-4 py-2 text-sm font-semibold text-[#0071e3] transition hover:border-[#0071e3]" id="helpToggle" aria-label="Toggle help tips" aria-expanded="false">Show / Hide</button>
                </div>
                <div class="help-content mt-6 text-sm leading-relaxed text-[#424245]" id="helpContent">
                    <div class="grid gap-6 lg:grid-cols-3">
                        <article class="tip-card">
                            <p class="text-xs uppercase tracking-[0.3em] text-[#86868b]">Setup</p>
                            <h4 class="text-lg font-semibold tracking-tight text-[#1d1d1f]">Capture clean input</h4>
                            <ul class="mt-3 space-y-2">
                                <li>Use closed-back headphones to avoid feedback loops.</li>
                                <li>Keep the microphone 10‚Äì20cm away for stable gain.</li>
                                <li>Enable Worklet mode (HTTPS or localhost) before going live.</li>
                            </ul>
                        </article>
                        <article class="tip-card">
                            <p class="text-xs uppercase tracking-[0.3em] text-[#86868b]">Performance</p>
                            <h4 class="text-lg font-semibold tracking-tight text-[#1d1d1f]">Play to the engine</h4>
                            <ul class="mt-3 space-y-2">
                                <li>Continuous mode favors slides and vibrato nuances.</li>
                                <li>Legacy mode locks to tempered notes for precision.</li>
                                <li>Switch modes only while stopped to avoid glitches.</li>
                            </ul>
                        </article>
                        <article class="tip-card">
                            <p class="text-xs uppercase tracking-[0.3em] text-[#86868b]">Troubleshoot</p>
                            <h4 class="text-lg font-semibold tracking-tight text-[#1d1d1f]">Stay in the flow</h4>
                            <ul class="mt-3 space-y-2">
                                <li>If you hear lag, close extra browser tabs and re-init audio.</li>
                                <li>Artifacts usually clear after changing presets or lowering noise.</li>
                                <li>Need deeper help? Read <a href="docs/guides/troubleshooting.md" class="inline-link">Troubleshooting Guide</a>.</li>
                            </ul>
                            <div class="warning-box hidden mt-4" id="warningBox">
                                <strong class="text-[#1d1d1f]">‚ö†Ô∏è Issues Detected:</strong>
                                <div class="mt-2" id="warningText"></div>
                            </div>
                        </article>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Â∫ìÊñá‰ª∂ -->
    <script src="js/lib/tone.js"></script>
    <script src="js/lib/pitchfinder-browser.js"></script>

    <!-- Phase 1: Èü≥È¢ëÈÖçÁΩÆÂíåÊäΩË±°Â±Ç (ÂøÖÈ°ªÂú®ÂÖ∂‰ªñÊ®°Âùó‰πãÂâçÂä†ËΩΩ) -->
    <script src="js/audio-config.js"></script>
    <script src="js/audio-io.js"></script>
    <!-- audio-input.js (Legacy) Â∑≤ÂºÉÁî®ÔºåAudioIO Êèê‰æõÂÆåÊï¥ÂäüËÉΩ -->

    <!-- Â∫îÁî®Ê®°Âùó -->
    <script src="js/pitch-detector.js"></script>
    <script src="js/synthesizer.js"></script>
    <script src="js/continuous-synth.js"></script> <!-- Phase 2: New engine -->
    <script src="js/performance.js"></script>

    <!-- Phase 3 Stage2: ÁßªÈô§ÂÖ®Â±ÄÊ°•Êé•ËÑöÊú¨ÔºåÊâÄÊúâÊ®°ÂùóÁî± main.js Áõ¥Êé• import -->
    <!-- Phase 2.10: ‰∏ªÂ∫îÁî® (ES Module) -->
    <script type="module" src="js/main.js"></script>
    <!-- Ê≥®ÊÑèÔºö‰∏çÂÜçÂä†ËΩΩ calibration.js -->
</body>
</html>
